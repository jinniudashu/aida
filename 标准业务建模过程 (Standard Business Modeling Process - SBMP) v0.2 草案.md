
**目的**：本过程框架旨在系统性地引导分析师（人或AI），通过与业务专家的交流，来获取、解构和定义一个目标业务系统的业务语义集合，以便将其精确地映射到《业务流程描述通用规范 (BPS)》的元模型中。

#### **第一部分：核心价值与服务**

1. **核心问题定义**：该业务为客户解决了哪一种根本性问题？
    
2. **服务与状态迁移**：
    
    - 为解决上述问题，业务提供了哪些核心产品或服务？请列出清单。
        
    - 针对每一个产品/服务，请明确它将作为核心标的物的业务实体，从何种**初始状态**转变为**目标状态**？
        

#### **第二部分：流程分解与实体识别**

3. **高级流程（里程碑）**：请概要描述该业务从发现客户需求，到最终交付产品/服务以解决问题的完整生命周期中的关键阶段（里程碑状态）和关键活动。
    
4. **递归分解与建模**：
    
    - 请对上述每一个关键阶段进行逐一展开分析。
        
    - 明确构成每个阶段所必需的**业务实体**（如：订单、客户、合同等），以及这些实体之间的结构关系（如：一份“合同”包含多个“合同明细”）。
        
    - 对识别出的每个实体进行递归分解，直至其符合下方定义的**原子性边界**为止。
        
    - 将所有识别出的业务概念，精确地映射到BPS核心元模型（如 `实体`、`服务`、`规则`、`角色` 等）对应的类型实例中。
        

#### **第三部分：原子性与规则定义规范**

5. **确定原子性的一般原则**：为保证建模粒度的一致性，当递归分解满足以下任一条件时，即视为达到原子边界：
    
    - **原子实体**：该实体是一个不可再分的**特定字段**（如“订单金额”）或**字面量**（如状态值“已支付”）。
        
    - **原子服务**：该服务是一个不可再分的**特定表单任务**，如“创建”、“填写”或“编辑”一张表单。
        
    - **原子行动者**：该行动者是一个**特定的角色**（如“医生”、“财务审批员”）。
        
6. **业务规则的精确描述 (EARS规范)**：为确保BPS中`Rules`组件的定义清晰、无歧义且可测试，强烈建议在定义规则时，遵循或转化为**EARS (Easy Approach to Requirements Syntax)** 的语法模板。
    
    - **泛在需求 (Universal)**: `The <系统名称> shall <系统响应>.`
        
        - _用于描述系统必须始终满足的全局性规则或约束。_
            
    - **事件驱动 (Event-Driven)**: `When <触发事件>, the <系统名称> shall <系统响应>.`
        
        - _完美映射到BPS `Rule`的 `Event -> Instruction` 结构。_
            
    - **状态驱动 (State-Driven)**: `While <处于某状态>, the <系统名称> shall <系统响应>.`
        
        - _用于描述系统在特定状态下的行为约束。_
            
    - **异常行为 (Unwanted Behavior)**: `If <发生不期望的条件>, then the <系统名称> shall <系统响应>.`
        
        - _专门用于定义错误处理和补偿逻辑。_
            
    - **可选特性 (Optional Feature)**: `Where <特性被包含>, the <系统名称> shall <系统响应>.`
        
        - _用于描述包含可选模块时的系统行为。_
            

#### **第四部分：具体操作指南与协作流程**

7. **系统化操作指南**：为确保分析过程的准确性和效率，建议遵循以下协作流程：
    
    1. **资料准备**：首先，请业务专家尽可能提供全面的业务资料，其中必须包含一个或多个能串联主要业务场景的**典型业务故事**。
        
    2. **形式化改写与初稿**：
	    1. 首要任务是尽可能使用**Gherkin语法 (Given-When-Then)** 对原始业务故事进行形式化改写，使其成为可执行的验收标准。
	    2. 然后开始分析师依据本标准结构分析初始资料，编写出业务蓝图初稿，验证当前业务蓝图初稿是否能够完整支持典型业务故事。
        
    3. **交互式详查与EARS应用**：分析师基于初稿，再次与业务专家进行对话。
        
        - 以Gherkin场景为线索，对每一个业务实体及其关系进行提问与确认。
            
        - 当讨论到业务逻辑和流程触发条件时，AI分析师应主动将用户的自然语言描述，**重构为EARS格式的规则语句**向用户确认，以确保每一条规则的精确性。
            
            - _例如：当用户说“订单完成后就发货”，AI助理应澄清并确认为：“**当** 订单状态变为 '完成', **系统应该** 创建 '发货' 服务. 这样准确吗？”_
                
        - 在此过程中，可参照以下“思维工具”清单，系统性地挖掘隐含要素：
            
            - 该服务是原子服务还是组合服务？
                
            - 如果是组合服务，其组合规则（`Rules`）都用EARS格式清晰定义了吗？
                
            - 规则中包含的事件（`When`/`If`）和响应（`shall`）都明确了吗？
                
            - 上下道服务之间是接续关系还是调用关系？
                
            - 业务程序发生意外（Unwanted Behavior）的处理程序明确吗？
                
    4. **系统辅助与测试驱动**：
        
        - 整个分析与建模过程应由配套的**设计系统**提供支持。所有被确认的业务要素都将结构化地保存在设计系统中。
            
        - 设计系统可提供**可视化反馈**（如流程图、实体关系图），帮助业务专家更直观地理解和确认模型。
            
        - 当核心流程通过验证后，设计系统可将业务蓝图**即时编译并加载到运行时引擎**中，应用“验收测试驱动开发”（ATDD）的方式，让业务专家能够直观感受业务程序的实际运行效果，即时调整优化。
            

#### **第五部分：业务蓝图示例**

##### 输入：典型业务故事

客户王女士，经朋友介绍电话/微信诊所咨询预约。客服小林接到王女士电话，为王女士做了预约登记 ｜ 客服填写「预约记录」。

王女士按预约时间来到诊所，客服小林礼貌接待，首先王女士确认身份，然后进行客户建档和健康调查，之后将王女士引导至陈医生诊室看诊 ｜ 客服更新「预约记录」，完成到诊确认，客服填写「客户档案」和「健康调查记录」。

陈医生接诊后开始进行面诊评估，获取主诉，进行皮肤检查，进行诊断，制定治疗方案 ｜ 医生填写「问诊记录单」

经医生问诊后，王女士选择皮肤年度疗程六选三（3万年管理套餐）服务包，项目包含：肉毒素保妥适100单位3支，全面部（间隔6个月，一年内用完3支）；超声炮全模式治疗1次（2个刀头+2个炮头）；超声炮加强治疗1次（2个炮头）

客服小林为王女士开会员，收费，建微信服务群（客户王女士，陈医生，护士小周，客服小林）

王女士签署知情同意书后开始第一次治疗，治疗项目：肉毒素保妥适100单位1支

陈医生在治疗中与王女士交流个人情况

治疗完成后客服向群里发送肉毒素治疗注意事项、购买套餐记录、治疗服务记录

客服设置王女士的回访周期日程和下次预约时间

医生或护士对于回访王女士的关注点进行口头交代或记录，如：“王女士，身份检验公司老总，性格随和，第一次做肉毒素问皮肤反应”

王女士治疗后第二天，护士根据回访日程表安排，准备回访王女士，先查看王女士病历记录中的个人信息和回访的关注点，然后进行回访。做好本次回访记录，跟医生交流王女士情况。

王女士治疗后第七天，护士根据回访日程表安排，准备回访王女士，先查看王女士病历记录中的个人信息和回访的关注点，然后进行回访。如有疑难问题，由医生直接交流。

王女士治疗后六个月，客服根据提醒日程表安排，提醒王女士再次预约治疗。

##### 输入：相关业务资料（略）

##### 输入：与用户的交流过程（略）

##### 输出：“Maor医美诊所”业务蓝图

### 《颜青医疗业务说明》

#### 第一部分：核心价值与服务

1. **核心问题定义**:  
    颜青医疗为有皮肤改善和抗衰老需求的客户，提供专业的、个性化的医疗美容解决方案，解决其在肤质、轮廓、形态、衰老等方面的困扰，提升其生活质量与自信心。
    
2. **服务与状态迁移**:
    
    - **核心产品/服务清单**:
        
        - 单项医美治疗（如光子嫩肤、肉毒素注射等）
            
        - 组合治疗套餐（如面部色素治疗套餐）
            
        - 年度管理服务（如3万元年卡、2万元年卡）
            
        - 会员充值服务
            
        - 医学护肤品销售
            
    - **核心标的物与状态迁移**:
        
        - **标的物**: 患者
            
        - **初始状态**: 潜在客户 (对服务有初步兴趣)
            
        - **目标状态**: 满意客户 (通过持续的治疗与服务，皮肤问题得到改善，并保持长期维护关系)
            

---

#### 第二部分：流程分解与实体识别 

1. **高级流程（里程碑）**:
    
    1. **线索获取与预约**: 从不同渠道获取潜在客户信息，完成首次预约。
        
    2. **到店接诊与建档**: 患者到店，完成身份确认、信息登记、建立健康档案。
        
    3. **专业面诊与方案**: 医生进行专业评估，与患者共同制定个性化治疗方案。
        
    4. **收费与开单**: 确认方案后，进行收费、开通会员或套餐。
        
    5. **治疗实施**: 签署知情同意书，执行具体的医美治疗。
        
    6. **术后关怀与随访**: 发送术后注意事项，并根据治疗项目进行周期性回访。
        
    7. **复诊与长期管理**: 根据治疗计划和随访结果，安排下一次复诊或治疗。
        
2. **递归分解与建模**: (此步骤的成果将直接体现在下文的 BPS 定义中)
    

---

### 第三部分：BPS 业务说明

#### **Entities (实体)**

|   |   |   |   |
|---|---|---|---|
|实体名称|业务类型|实现类型|描述|
|**核心业务对象**||||
|患者|人员|DATA_TABLE|接受医疗服务的客户，是业务的核心标的物。|
|就诊记录|业务记录|DATA_TABLE|记录患者从到店到完成一次完整诊疗过程的档案。|
|预约记录|业务记录|DATA_TABLE|患者的预约信息。|
|治疗方案|业务记录|DATA_TABLE|针对患者问题制定的治疗计划，包含项目、套餐等。|
|收费单|业务记录|DATA_TABLE|记录治疗项目费用的单据。|
|会员档案|业务记录|DATA_TABLE|患者的会员信息，包括等级、折扣、余额等。|
|医美项目|业务资源|SYSTEM_TABLE|诊所提供的所有标准医疗美容服务项目的主数据。|
|产品耗材|业务资源|SYSTEM_TABLE|治疗过程中消耗的药品、针剂等物料的主数据。|
|库存记录|业务记录|LOG|产品耗材的出入库台账。|
|随访任务|业务记录|DATA_TABLE|针对患者的术后跟踪回访任务。|
|回访关注点|业务记录|DATA_TABLE|医生或护士记录的针对特定患者的个性化回访要点。|
|**人员与角色**||||
|人员|业务资源|SYSTEM_TABLE|系统中所有自然人的基类。|
|员工|人员|SYSTEM_TABLE|诊所的工作人员。|
|**文档与表单**||||
|业务记录|业务资源|SYSTEM_TABLE|所有业务单据、表单的基类。|
|问诊记录单|业务记录|DATA_TABLE|医生面诊时填写的详细记录单。|
|知情同意书|业务记录|FILE|患者在接受治疗前签署的同意文件。|
|治疗记录表|业务记录|DATA_TABLE|记录具体治疗项目执行参数的表单。|
|会员手册|业务文档|FILE|描述会员制度、权益和规则的文档。|
|收费标准|业务文档|FILE|诊所发布的官方项目价格列表。|

#### **Roles (角色)**

|   |   |   |
|---|---|---|
|角色名称|角色类型|角色能力 (Services)|
|客服|USER_DEFINED|预约管理, 接待建档, 收费开单, 随访调度|
|医生|USER_DEFINED|专业面诊, 方案制定, 核心治疗执行|
|护士|USER_DEFINED|治疗协助, 常规治疗执行, 库存管理, 术后随访执行|
|System|SYSTEM_RESERVED|患者就诊流程编排, 任务自动创建, 状态监控|
|Timer|SYSTEM_RESERVED|定时事件触发|

#### **Services (服务)**

|   |   |   |   |
|---|---|---|---|
|服务名称|描述|Composition Type|关联规则|
|患者就诊流程|管理患者从预约到随访的端到端完整流程。|COMPOSITE|患者就诊流程总规则|
|1. 预约管理|处理患者预约登记与提醒。|COMPOSITE|预约管理规则|
|2. 接待与面诊|患者到店接待、建档、面诊及方案制定。|COMPOSITE|接待与面诊规则|
|3. 收费开单|根据方案进行计价、收费、核销。|ATOMIC|(表单任务)|
|4. 治疗执行|签署文书、执行治疗、记录参数。|COMPOSITE|治疗执行规则|
|5. 术后随访|调度与执行周期性回访。|COMPOSITE|术后随访规则|
|创建随访任务|根据项目模板创建具体的随访任务。|ATOMIC|(后台程序)|

#### **Rules (规则)**

(使用EARS格式精确描述)

- **患者就诊流程总规则**
    
    - **Rule-001:** **When** a 预约请求 event is received (evaluation_mode: NON_DETERMINISTIC), the System **shall** start_service("1. 预约管理").
        
    - **Rule-002:** **When** return_from_call("1. 预约管理") is received with a confirmed 预约记录, the System **shall** wait for the 患者到店 event.
        
    - **Rule-003:** **When** a 患者到店 event is triggered for a confirmed 预约记录, the System **shall** call_sub("2. 接待与面诊").
        
    - **Rule-004:** **When** return_from_call("2. 接待与面诊") is received with a confirmed 治疗方案, the System **shall** call_sub("3. 收费开单").
        
    - **Rule-005:** **When** return_from_call("3. 收费开单") is received with a 收费单.状态 of '已支付', the System **shall** call_sub("4. 治疗执行").
        
    - **Rule-006:** **When** return_from_call("4. 治疗执行") is received, the System **shall** start_service("5. 术后随访").
        
- **治疗执行规则**
    
    - **Rule-401:** **When** the 治疗执行 service starts, the System **shall** present the 知情同意书 for the relevant 医美项目 to be signed.
        
    - **Rule-402:** **If** 知情同意书.状态 is not '已签署', **then** the System **shall not** allow the 治疗记录表 to be initiated.
        
    - **Rule-403:** **When** 治疗记录表.状态 becomes '已完成', the System **shall** instruct the 护士 role to update 库存记录 for the consumed 产品耗材.
        
- **术后随访规则**
    
    - **Rule-501:** **When** the 术后随访 service starts, the System **shall** start_iteration of the 创建随访任务 service for each follow-up period defined in the 医美项目.随访周期 template.
        
    - **Rule-502:** **When** a 随访任务.计划时间 is reached, the Timer **shall** trigger an event to change 随访任务.状态 to '待执行'.
        
    - **Rule-503:** **While** 随访任务.状态 is '待执行', the System **shall** display the task, along with any associated 回访关注点, in the responsible 护士 or 客服's task queue.
        
    - **Rule-504:** **When** a 护士 or 客服 completes a follow-up call, the System **shall** allow them to log the details and update the 随访任务.状态 to '已完成'.

